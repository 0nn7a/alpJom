import{j as f,k as x,l as S,c as p,o as d,d as _,F as y,f as E,m as I,v as C,n as F,e as j,t as K}from"./index-tpxHJt8G.js";const L=["onUpdate:modelValue","onKeydown"],M={__name:"OtpInput",props:{modelValue:{type:String,default:""},length:{type:Number,default:5}},emits:["update:modelValue","submit"],setup(m,{emit:c}){const o=m,i=c,r=/^[a-z]$/g,n=f(Array(o.length).fill("")),s=f([]),b=e=>r.test(e),v=()=>n.value.findIndex(e=>!e),V=e=>(e.data||e.target.value||"").toLowerCase().slice(-1),h=()=>{var t;const e=v();e!==-1&&((t=s.value[e])==null||t.focus())},w=e=>{const t=V(e);if(!b(t))return e.preventDefault();const a=v();a!==-1&&(n.value[a]=t,h()),e.preventDefault()},g=()=>{n.value.every(Boolean)&&i("submit",n.value.join(""))},D=(e,t)=>{var a;e.key==="Enter"&&(g(),e.preventDefault()),e.key==="Backspace"&&(n.value[t]?n.value[t]="":t>0&&((a=s.value[t-1])==null||a.focus()),e.preventDefault())},k=e=>{var u;e.preventDefault();const a=e.clipboardData.getData("text").toLowerCase().replace(r,"").slice(0,o.length).split("");a.forEach((z,B)=>{n.value[B]=z});const l=a.length<o.length?a.length:o.length-1;(u=s.value[l])==null||u.focus()};return x(()=>o.modelValue,e=>{const t=e.split("");for(let a=0;a<o.length;a++)n.value[a]=t[a]||""}),x(n,e=>{i("update:modelValue",e.join(""))},{deep:!0}),S(()=>{h()}),(e,t)=>(d(),p("form",{class:"flex gap-4",onSubmit:F(g,["prevent"])},[(d(!0),p(y,null,E(n.value,(a,l)=>I((d(),p("input",{key:l,ref_for:!0,ref_key:"inputs",ref:s,"onUpdate:modelValue":u=>n.value[l]=u,class:"w-16 h-18 text-center text-4xl text-zinc-100 uppercase border border-zinc-500 rounded-lg focus:outline-none focus:ring-1 focus:zinc-100 transition duration-300",type:"text",inputmode:"text",pattern:"[A-Za-z]",maxlength:"1",autocomplete:"off",lang:"en",onBeforeinput:w,onKeydown:u=>D(u,l),onPaste:k},null,40,L)),[[C,n.value[l]]])),128)),t[0]||(t[0]=_("button",{type:"submit",class:"hidden"},"submit",-1))],32))}},N={class:"text-5xl text-zinc-100"},$={__name:"GameView",setup(m){const c=f(""),o=f(""),i=r=>{o.value=r};return(r,n)=>(d(),p(y,null,[j(M,{length:5,modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=s=>c.value=s),onSubmit:i},null,8,["modelValue"]),_("p",N,K(o.value),1)],64))}};export{$ as default};
