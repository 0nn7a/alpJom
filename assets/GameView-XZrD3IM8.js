import{m as V,u as F,j as w,c as v,o as g,d as k,F as C,f as M,n as S,k as D,b as N,l as E,p as O,e as $}from"./index-BabEu25w.js";const j=["value","placeholder","disabled","onInput","onKeydown"],K={__name:"OtpInput",props:V({length:{type:Number,default:5},placeholders:{type:Array,default:()=>[]},correctIdx:{type:Array,default:[]},unsureIdx:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:V(["update:modelValue","submit"],["update:modelValue"]),setup(y,{expose:e,emit:r}){const a=y,n=r,x=/^[a-z]$/,o=F(y,"modelValue"),i=w([]),d=(s,t)=>{s&&(i.value[t]=s)},p=()=>{i.value[0].focus()},h=(s,t)=>{const f=s.target.value.toLowerCase().slice(-1);x.test(f)?(o.value[t]=f,i.value[t+1]&&i.value[t+1].focus()):(o.value[t]="",s.target.value="")},u=s=>{var c,z;s.preventDefault(),s.target.value="";const f=s.clipboardData.getData("text").toLowerCase().replace(/[^a-z]/g,"").slice(0,a.length).split("");for(let m=0;m<a.length;m++)o.value[m]=f[m]||"";const l=o.value.findIndex(m=>!m);l!==-1?(c=i.value[l])==null||c.focus():(z=i.value[a.length-1])==null||z.focus()},b=(s,t)=>{var f;s.key==="Backspace"?!o.value[t]&&t>0&&((f=i.value[t-1])==null||f.focus()):(s.key==="Enter"||s.code==="Enter")&&(s.preventDefault(),A())},A=()=>{o.value.every(Boolean)&&n("submit")};return e({focusFirst:p,clearModel:()=>{o.value=Array(a.length).fill("")}}),(s,t)=>(g(),v("form",{class:"flex gap-4",onSubmit:A},[(g(!0),v(C,null,M(o.value,(f,l)=>(g(),v("input",{key:l,ref_for:!0,ref:c=>d(c,l),value:o.value[l],placeholder:a.placeholders[l],disabled:a.disabled,class:S([{"text-green-300":a.correctIdx.includes(l),"text-orange-300":a.unsureIdx.includes(l),"text-zinc-100":!a.correctIdx.includes(l)&&!a.unsureIdx.includes(l),"opacity-50":a.disabled},"w-16 h-18 text-center text-4xl uppercase border border-zinc-500 rounded-lg focus:outline-none focus:ring-1 focus:zinc-100 transition duration-300"]),type:"text",inputmode:"latin",lang:"en",pattern:"[A-Za-z]",maxlength:"1",autocomplete:"off",autocorrect:"off",spellcheck:"false",onInput:c=>h(c,l),onPaste:t[0]||(t[0]=c=>u(c)),onKeydown:c=>b(c,l)},null,42,j))),128)),t[1]||(t[1]=k("button",{type:"submit",class:"hidden"},"submit",-1))],32))}};class R{constructor(e,r=5){this.as=e,this.size=r,this.ga=Array(r).fill(""),this.cp=Array(r).fill(""),this.ci=[],this.ui=[]}get aa(){return this.as.split("")}get gs(){return this.ga.join("")}check(){for(let e=0;e<this.size;e++)this.ga[e]===this.aa[e]?(this.cp[e]=this.aa[e],this.ci.push(e)):this.aa.includes(this.ga[e])&&this.ui.push(e);return this.cp}clearCP(){this.cp=Array(this.size).fill("")}compare(){return this.gs===this.as}}const L={class:"mb-36 h-full w-full flex flex-col justify-center items-center gap-6"},P={class:"flex flex-col gap-4"},_=5,I=6,B="world",U={__name:"GameView",setup(y){const e=D("otpRefs"),r=w(Array(I).fill(!1)),a=d=>{r.value=Array(I).fill(d)},n=w(Array.from({length:I},()=>new R(B,_))),x=async d=>{r.value[d]=!0;const p=n.value[d],h=n.value[d+1];p.compare()?(alert("BINGOðŸŽ‰ðŸŽ‰ðŸŽ‰"),a(!0)):h&&(h.cp=p.check(),e.value[d+1].focusFirst())},o=N(()=>r.value.every(Boolean)),i=()=>{n.value=Array.from({length:I},()=>new R(B,_)),a(!1),e.value[0].focusFirst()};return E(()=>e.value[0].focusFirst()),(d,p)=>(g(),v("section",L,[p[0]||(p[0]=k("h1",{class:"text-4xl text-zinc-50"},"Classic Mode",-1)),k("div",P,[(g(),v(C,null,M(6,(h,u)=>$(K,{key:h+"time",ref_for:!0,ref_key:"otpRefs",ref:e,length:_,placeholders:n.value[u].cp,correctIdx:n.value[u].ci,unsureIdx:n.value[u].ui,disabled:r.value[u],modelValue:n.value[u].ga,"onUpdate:modelValue":b=>n.value[u].ga=b,onSubmit:b=>x(u)},null,8,["placeholders","correctIdx","unsureIdx","disabled","modelValue","onUpdate:modelValue","onSubmit"])),64))]),o.value?(g(),v("button",{key:0,type:"button",class:"py-3 px-6 text-2xl bg-zinc-800 border border-zinc-900 rounded-lg cursor-pointer transition duration-300 ease-in-out hover:border-zinc-500",onClick:i}," RESTART ")):O("",!0)]))}};export{U as default};
