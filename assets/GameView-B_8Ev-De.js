import{m as k,u as D,j as R,c as v,o as g,d as _,F as V,f as A,n as B,k as C,b as M,l as O,p as S,q as E,e as N}from"./index-B3tVoyvO.js";const F=["value","placeholder","disabled","id","name","onInput","onKeydown"],T={__name:"OtpInput",props:k({length:{type:Number,default:5},placeholders:{type:Array,default:()=>[]},correctIdx:{type:Array,default:[]},unsureIdx:{type:Array,default:[]},disabled:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:k(["update:modelValue","submit"],["update:modelValue"]),setup(y,{expose:e,emit:p}){const l=y,o=p,w=/^[a-z]$/,r=D(y,"modelValue"),f=R([]),I=(s,t)=>{s&&(f.value[t]=s)},n=()=>{f.value[0].focus()},u=(s,t)=>{const h=s.target.value.toLowerCase().slice(-1);w.test(h)?(r.value[t]=h,f.value[t+1]&&f.value[t+1].focus()):(r.value[t]="",s.target.value="")},c=s=>{var d,x;s.preventDefault(),s.target.value="";const h=s.clipboardData.getData("text").toLowerCase().replace(/[^a-z]/g,"").slice(0,l.length).split("");for(let m=0;m<l.length;m++)r.value[m]=h[m]||"";const a=r.value.findIndex(m=>!m);a!==-1?(d=f.value[a])==null||d.focus():(x=f.value[l.length-1])==null||x.focus()},i=(s,t)=>{var h;s.key==="Backspace"?!r.value[t]&&t>0&&((h=f.value[t-1])==null||h.focus()):(s.key==="Enter"||s.code==="Enter")&&(s.preventDefault(),b())},b=()=>{r.value.every(Boolean)&&o("submit")};return e({focusFirst:n,clearModel:()=>{r.value=Array(l.length).fill("")}}),(s,t)=>(g(),v("form",{class:"flex gap-4",onSubmit:b},[(g(!0),v(V,null,A(r.value,(h,a)=>(g(),v("input",{key:"Otp"+a,ref_for:!0,ref:d=>I(d,a),value:r.value[a],placeholder:l.placeholders[a],disabled:l.disabled,class:B([{"text-green-300":l.correctIdx.includes(a),"text-orange-300":l.unsureIdx.includes(a),"text-zinc-100":!l.correctIdx.includes(a)&&!l.unsureIdx.includes(a),"opacity-50":l.disabled},"w-16 h-18 text-center text-4xl uppercase border border-zinc-500 rounded-lg focus:outline-none focus:ring-1 focus:zinc-100 transition duration-300"]),id:"Otp"+a,name:"Otp"+a,type:"text",inputmode:"latin",lang:"en",pattern:"[A-Za-z]",maxlength:"1",autocomplete:"off",autocorrect:"off",spellcheck:"false",onInput:d=>u(d,a),onPaste:t[0]||(t[0]=d=>c(d)),onKeydown:d=>i(d,a)},null,42,F))),128)),t[1]||(t[1]=_("button",{type:"submit",class:"hidden"},"submit",-1))],32))}};class ${constructor(e,p=5){this.as=e,this.size=p,this.d=!0,this.ga=Array(p).fill(""),this.cp=Array(p).fill(""),this.ci=[],this.ui=[]}get aa(){return this.as.split("")}get gs(){return this.ga.join("")}setDisabled(e){this.d=e}check(){for(let e=0;e<this.size;e++)this.ga[e]===this.aa[e]?(this.cp[e]=this.aa[e],this.ci.push(e)):this.aa.includes(this.ga[e])&&this.ui.push(e);return this.cp}clearCP(){this.cp=Array(this.size).fill("")}compare(){return this.gs===this.as}}const j={class:"mb-36 h-full w-full flex flex-col justify-center items-center gap-6"},K={class:"flex flex-col gap-4"},z=5,L=6,P="world",U={__name:"GameView",setup(y){const e=C("otpRefs"),p=async n=>{await E(),e.value[n].focusFirst()},l=()=>Array.from({length:L},(n,u)=>{const c=new $(P,z);return u||c.setDisabled(!1),c}),o=R(l()),w=()=>{o.value.forEach(n=>n.setDisabled(!0))},r=async n=>{const u=o.value[n],c=o.value[n+1];u.setDisabled(!0),u.compare()?(alert("BINGOðŸŽ‰ðŸŽ‰ðŸŽ‰"),w()):c&&(c.setDisabled(!1),c.cp=u.check(),await p(n+1))},f=M(()=>o.value.map(n=>n.d).every(Boolean)),I=()=>{o.value=l(),p(0)};return O(()=>{p(0)}),(n,u)=>(g(),v("section",j,[u[0]||(u[0]=_("h1",{class:"text-4xl text-zinc-50"},"Classic Mode",-1)),_("div",K,[(g(),v(V,null,A(6,(c,i)=>N(T,{key:c+"time",ref_for:!0,ref_key:"otpRefs",ref:e,length:z,placeholders:o.value[i].cp,correctIdx:o.value[i].ci,unsureIdx:o.value[i].ui,disabled:o.value[i].d,modelValue:o.value[i].ga,"onUpdate:modelValue":b=>o.value[i].ga=b,onSubmit:b=>r(i)},null,8,["placeholders","correctIdx","unsureIdx","disabled","modelValue","onUpdate:modelValue","onSubmit"])),64))]),f.value?(g(),v("button",{key:0,type:"button",class:"py-3 px-6 text-2xl bg-zinc-800 border border-zinc-900 rounded-lg cursor-pointer transition duration-300 ease-in-out hover:border-zinc-500",onClick:I}," RESTART ")):S("",!0)]))}};export{U as default};
